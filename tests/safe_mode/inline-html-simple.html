<p>Here's a simple block:
</p>
&lt;div&gt;
    foo
&lt;/div&gt;

<p>This should be a code block, though:
</p>
<pre><code>&lt;div&gt;
    foo
&lt;/div&gt;
</code></pre><p>As should this:
</p>
<pre><code>&lt;div&gt;foo&lt;/div&gt;
</code></pre><p>Now, nested:
</p>
&lt;div&gt;
    &lt;div&gt;
        &lt;div&gt;
            foo
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

<p>This should just be an HTML comment:
</p>
&lt;!-- Comment --&gt;

<p>Multiline:
</p>
&lt;!--
Blah
Blah
--&gt;

<p>Code block:
</p>
<pre><code>&lt;!-- Comment --&gt;
</code></pre><p>Just plain comment, with trailing spaces on the line:
</p>
&lt;!-- foo --&gt;

<p>Code:
</p>
<pre><code>&lt;hr /&gt;
</code></pre><p>Hr's:
</p>
&lt;hr&gt;

&lt;hr/&gt;

&lt;hr /&gt;

&lt;hr&gt;

&lt;hr/&gt;

&lt;hr /&gt;

&lt;hr class=&quot;foo&quot; id=&quot;bar&quot; /&gt;

&lt;hr class=&quot;foo&quot; id=&quot;bar&quot;/&gt;

&lt;hr class=&quot;foo&quot; id=&quot;bar&quot; &gt;